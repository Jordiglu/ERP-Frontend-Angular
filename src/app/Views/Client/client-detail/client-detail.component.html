<!--
==================================================================================================================
  PENDING WORK:
- Client Image Update
- Orders Section
==================================================================================================================
-->

<div class="container">
  <div class="row py-5">
    <div class="col-sm-12 d-flex justify-content-end">
      <a [routerLink]="['/client-list']">{{ 'Client.back-to-client-list' | translate}}</a>
    </div>
  </div>

  <h4 class="text-center pb-5">{{ 'Client.client-detail' | translate}}</h4>

  <div class="row mb-3">
    <!-- Client fields -->
    <div class="col-md-6">
      <form method="post" role="form" class="php-email-form" autocomplete="off"
            [formGroup]='form'
            (ngSubmit)="submit()">
        <!-- Name -->
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="name" class="col-form-label">{{ 'Client.name' | translate}}:</label>
          </div>
          <div class="col">
            <input id="name"
                   name="name"
                   type="text"
                   class="form-control"
                   autocomplete="off"
                   formControlName="name"
                   [class.is-invalid]="isNameInvalid"
                   autofocus />
            <div *ngIf="isNameInvalid" class="invalid-feedback">{{ 'Validation.required-field' | translate}}{{client.name_and_surname }}</div>
          </div>
        </div>

        <!-- Street -->
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="street" class="col-form-label">{{ 'Client.street' | translate}}:</label>
          </div>
          <div class="col">
            <input id="street"
                   name="street"
                   type="text"
                   class="form-control"
                   autocomplete="off"
                   formControlName="street"
                   [class.is-invalid]="isStreetInvalid" />
            <div *ngIf="isStreetInvalid" class="invalid-feedback">{{ 'Validation.required-field' | translate}}</div>
          </div>
        </div>

        <!-- Number -->
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="number" class="col-form-label">{{ 'Client.number' | translate}}:</label>
          </div>
          <div class="col">
            <input id="numbert"
                   name="number"
                   type="text"
                   class="form-control"
                   autocomplete="off"
                   formControlName="number"
                   [class.is-invalid]="isNumberInvalid" />
            <div *ngIf="isNumberInvalid" class="invalid-feedback">{{ 'Validation.required-field' | translate}}</div>
          </div>
        </div>

        <!--City-->
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="city" class="col-form-label">{{ 'Client.city' | translate}}:</label>
          </div>
          <div class="col">
            <input id="city"
                  name="city"
                  type="text"
                  class="form-control"
                  autocomplete="off"
                  formControlName="city"
                  [class.is-invalid]="isCityInvalid" />
            <div *ngIf="isCityInvalid" class="invalid-feedback">{{ 'Validation.required-field' | translate}}</div>
          </div>
        </div>

        <!-- Zip code -->
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="zip" class="col-form-label">{{ 'Client.zip' | translate}}:</label>
          </div>
          <div class="col">
            <input id="zip"
                   name="zip"
                   type="text"
                   class="form-control"
                   autocomplete="off"
                   formControlName="zip"
                   [class.is-invalid]="isZipInvalid" />
            <div *ngIf="isZipInvalid" class="invalid-feedback">{{ 'Validation.required-field' | translate}}</div>
          </div>
        </div>

         <!--Country-->
         <div class="row mb-3">
          <div class="col-md-3">
            <label for="country" class="col-form-label">{{ 'Client.country' | translate}}:</label>
          </div>
          <div class="col">
            <input id="country"
                  name="country"
                  type="text"
                  class="form-control"
                  autocomplete="off"
                  formControlName="country"
                  [class.is-invalid]="isCountryInvalid" />
            <div *ngIf="isCountryInvalid" class="invalid-feedback">{{ 'Validation.required-field' | translate}}</div>
          </div>
        </div>

        <!-- CIF -->
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="clientCif" class="col-form-label">{{ 'Client.cif' | translate}}:</label>
          </div>
          <div class="col">
            <input id="cif"
                   name="cif"
                   type="text"
                   class="form-control"
                   autocomplete="off"
                   formControlName="cif"
                   [class.is-invalid]="isCIFInvalid" />
            <div *ngIf="isCIFInvalid" class="invalid-feedback">{{ 'Validation.required-field' | translate}}</div>
          </div>
        </div>

        <!-- SERVER RESPONSE ALERT (copied from login page) -->
        <div *ngIf="showAlert"
             class="mb-3 mx-auto text-center border rounded-3"
             [ngClass]="{
                'border-erp-darkgreen': success,
                'text-erp-darkgreen': success,
                'bg-erp-palegreen': success,
                'border-erp-firebrick ': !success,
                'text-erp-firebrick ': !success,
                'bg-erp-pink': !success
              }">
          <small>{{ alertMessage }}</small>
        </div>


        <div class="row py-2">
          <div class="col-7 d-flex justify-content-center">
            <!--Delete Button-->
            <button type="button" class="btn btn-erp-red text-erp-white me-3" data-bs-toggle="modal"
                    data-bs-target="#deleteModal">{{ 'Client.buttons.delete' | translate}}</button>
            <!--Edit Button-->
            <button type="submit" class="btn btn-erp-blue text-erp-white me-3">{{ 'Client.buttons.save' |
              translate}}</button>
          </div>
        </div>
      </form>
    </div><!-- /.col-md-6 -->

    <!-- Client image -->
    <div class="col-md-6 text-center">
      <img src="assets/images/mockup-portrait.jpg"
           class="img-responsive rounded client-avatar">
      <i class="fas fa-edit mx-2 client-avatar-edit-button"></i>
    </div>
  </div><!-- /.row -->


  <!-- Modal - Delete Confirmation -->
  <div class="modal fade"
       id="deleteModal"
       tabindex="-1"
       aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            {{ 'Client.modal.delete.title' | translate }}
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          {{ 'Client.modal.delete.message' | translate }}
        </div>

        <div class="modal-footer">
          <button type="button" class="btn appButton text-uppercase" data-bs-dismiss="modal">
            {{ 'Client.modal.delete.button-no' | translate }}
          </button>
          <button type="button" class="btn btn-primary deleteButton text-uppercase" (click)="deleteClient()"
                  data-bs-dismiss="modal">
            {{ 'Client.modal.delete.button-delete' | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- -------------------------------------------------------------- -->
  <!-- ORDERS SECTION REMAINS TO BE IMPLEMENTED !!!-->
  <!-- -------------------------------------------------------------- -->
  <h4 class="text-center py-4">Orders</h4>

  <!-- Orders data -->
  <div class="table-responsive mb-5">
    <table class="table align-middle">
      <thead>
        <tr>
          <th scope="col">Orders</th>
          <th scope="col">Day</th>
          <th scope="col">Total</th>
          <th scope="col">CIF</th>
          <th scope="col">Options</th>
        </tr>
      </thead>
      <tbody>
        <!--      <tr>-->
        <!--        <th scope="row"></th>-->
        <!--        <td></td>-->
        <!--        <td></td>-->
        <!--        <td></td>-->
        <!--        <td></td>-->
        <!--        <td></td>-->
        <!--      </tr>-->
      </tbody>
    </table>
  </div>

</div>
